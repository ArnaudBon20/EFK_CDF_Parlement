<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EFK/CDF - Statistiken</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="header-main">
                <h1><a href="index_de.html" style="color: inherit; text-decoration: none;">üèõÔ∏è Die EFK im Parlament</a></h1>
                <nav>
                    <a href="index_de.html">Vorst√∂sse</a>
                    <a href="debates_de.html">Debatten</a>
                    <a href="stats_de.html" class="active">Statistiken</a>
                </nav>
            </div>
            <div class="lang-switcher">
                <a href="stats.html">FR</a>
                <span>|</span>
                <a href="stats_de.html" class="active">DE</a>
            </div>
        </div>
    </header>

    <main class="container">
        <section class="stats-section">
            <h2>üìä Statistiken der Vorst√∂sse</h2>
            
            <div class="stats-filters">
                <div class="filter-dropdown" id="objectYearDropdown">
                    <button class="filter-btn" type="button">Jahr <span class="filter-count"></span></button>
                    <div class="filter-menu" id="objectYearMenu">
                        <label class="select-all"><input type="checkbox" data-select-all checked> Alle</label>
                    </div>
                </div>
                <div class="filter-dropdown" id="objectCouncilDropdown">
                    <button class="filter-btn" type="button">Rat <span class="filter-count"></span></button>
                    <div class="filter-menu">
                        <label class="select-all"><input type="checkbox" data-select-all checked> Alle</label>
                        <label><input type="checkbox" value="N"> Nationalrat</label>
                        <label><input type="checkbox" value="S"> St√§nderat</label>
                    </div>
                </div>
                <div class="filter-dropdown" id="objectPartyDropdown">
                    <button class="filter-btn" type="button">Partei <span class="filter-count"></span></button>
                    <div class="filter-menu" id="objectPartyMenu">
                        <label class="select-all"><input type="checkbox" data-select-all checked> Alle</label>
                    </div>
                </div>
                <button class="filter-reset" id="resetObjectFilters" title="Zur√ºcksetzen">‚Üª</button>
            </div>
            
            <div class="stats-row">
                <div class="stat-card">
                    <h3>Vorst√∂sse nach Partei</h3>
                    <div class="chart-container">
                        <canvas id="partyChart"></canvas>
                    </div>
                </div>
                
                <div class="stat-card">
                    <h3>Vorst√∂sse nach Typ</h3>
                    <div class="chart-container">
                        <canvas id="typeChart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="stats-row">
                <div class="stat-card">
                    <h3>üìà Entwicklung pro Jahr</h3>
                    <div class="chart-container-wide">
                        <canvas id="yearChart"></canvas>
                    </div>
                </div>
                
                <div class="stat-card top-card">
                    <h3>üèÜ Top 5 Parlamentarier</h3>
                    <div id="topAuthors" class="top-authors-list">
                        <p>Laden...</p>
                    </div>
                </div>
            </div>
        </section>
        
        <section class="stats-section">
            <h2>üó£Ô∏è Debatten-Statistiken</h2>
            
            <div class="stats-filters">
                <div class="filter-dropdown" id="debateYearDropdown">
                    <button class="filter-btn" type="button">Jahr <span class="filter-count"></span></button>
                    <div class="filter-menu" id="debateYearMenu">
                        <label class="select-all"><input type="checkbox" data-select-all checked> Alle</label>
                    </div>
                </div>
                <div class="filter-dropdown" id="debateSessionDropdown">
                    <button class="filter-btn" type="button">Session <span class="filter-count"></span></button>
                    <div class="filter-menu" id="debateSessionMenu">
                        <label class="select-all"><input type="checkbox" data-select-all checked> Alle</label>
                        <label><input type="checkbox" value="Fr√ºhjahr"> Fr√ºhjahr</label>
                        <label><input type="checkbox" value="Sommer"> Sommer</label>
                        <label><input type="checkbox" value="Herbst"> Herbst</label>
                        <label><input type="checkbox" value="Winter"> Winter</label>
                        <label><input type="checkbox" value="Sonder"> Sonder</label>
                    </div>
                </div>
                <div class="filter-dropdown" id="debateCouncilDropdown">
                    <button class="filter-btn" type="button">Rat <span class="filter-count"></span></button>
                    <div class="filter-menu">
                        <label class="select-all"><input type="checkbox" data-select-all checked> Alle</label>
                        <label><input type="checkbox" value="N"> Nationalrat</label>
                        <label><input type="checkbox" value="S"> St√§nderat</label>
                    </div>
                </div>
                <div class="filter-dropdown" id="debatePartyDropdown">
                    <button class="filter-btn" type="button">Partei <span class="filter-count"></span></button>
                    <div class="filter-menu" id="debatePartyMenu">
                        <label class="select-all"><input type="checkbox" data-select-all checked> Alle</label>
                    </div>
                </div>
                <button class="filter-reset" id="resetDebateFilters" title="Zur√ºcksetzen">‚Üª</button>
            </div>
            
            <div class="stats-row">
                <div class="stat-card">
                    <h3>Interventionen nach Partei</h3>
                    <div class="chart-container">
                        <canvas id="debatePartyChart"></canvas>
                    </div>
                </div>
                
                <div class="stat-card">
                    <h3>Interventionen nach Rat</h3>
                    <div class="chart-container">
                        <canvas id="debateCouncilChart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="stats-row">
                <div class="stat-card top-card">
                    <h3>üèÜ Top 5 Redner (Debatten)</h3>
                    <div id="topSpeakers" class="top-authors-list">
                        <p>Laden...</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <h3>üìä Zusammenfassung</h3>
                    <div id="debateSummary" class="summary-box">
                        <p>Laden...</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>Daten: <a href="https://ws.parlament.ch/" target="_blank">API des Schweizer Parlaments</a> ¬∑ 
               <a href="https://github.com/ArnaudBon20/EFK_CDF_Parlement" target="_blank">Quellcode</a></p>
            <p class="feedback-box"><a href="mailto:arnaud.bonvin@efk.admin.ch">Feedback ?</a></p>
        </div>
    </footer>

    <button id="scrollTopBtn" class="scroll-top-btn" title="Nach oben">‚Üë</button>
    <script src="stats_de.js"></script>
    <script>
        const scrollBtn = document.getElementById('scrollTopBtn');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) {
                scrollBtn.classList.add('visible');
            } else {
                scrollBtn.classList.remove('visible');
            }
        });
        scrollBtn.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    </script>
</body>
</html>
